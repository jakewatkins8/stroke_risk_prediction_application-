(this.webpackJsonpnewporj=this.webpackJsonpnewporj||[]).push([[0],{34:function(e,t,n){},36:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var s,c,a,r,o=n(1),i=n.n(o),l=n(21),j=n.n(l),d=(n(34),n(3)),u=n(15),h=n.n(u),b=n(22),O=n(2),m=(n(36),"https://stroke-risk-assessment-app.herokuapp.com/"),g=[],x=0,p=function(e){if(!c){if(x>=10)return s&&clearTimeout(s),void(c||(a=(new Date).toISOString(),clearTimeout(c),c=setTimeout((function(){f(!0)}),1e4)));if(console.log("error received in queue"),clearTimeout(s),s=setTimeout(f,5e3),"string"===typeof e){var t=e;e=null,(e=new Error).msg=t,e.cause="whatever"}"object"!==typeof e&&(console.log("what in the WORLD do we have here?"),console.log("check it out:"),console.log(e));var n=new Date;e.queueTime=n.getTime(),e.queueTimeISO=n.toISOString(),console.log("name, message, cause, queueTime:","\n",e.name,"\n",e.message,"\n",e.cause,"\n",e.queueTime),g.push(e),x++}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(console.log("".concat(g.length," error(s) in queue.")),e&&console.log("Note: errors thrown by the browser after the first 10 were blocked for the past 3 minutes."),g.forEach((function(e){var t="(time: ".concat(e.queueTimeISO," // cause: ").concat(e.cause,")\n         name: ").concat(e.name,"; msg: ").concat(e.message,";");e.log_string=t})),e){var t=(new Date).toISOString(),n={};n.log_string="*NOTE: The last 10 log records came from an overflown queue. For the time between ".concat(a," and ").concat(t,", any additional front end errors thrown after these 10 were not logged (the overflown queue was blocked to keep from making too many server calls.)"),g.push(n)}fetch(m+"api/clientlogger",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json"}}).then((function(e){return e.ok?"response after logging ok":"reponse after logging NOT ok"})).then((function(e){return e})).catch((function(e){console.log("something went wrong while logging the error queue to the server -> '\n",e)})),g.splice(0,g.length),x=0,c=null},v=n(0),y=i.a.createContext({token:"",isLoggedIn:!1,login:function(e){},logout:function(e){},autoLoggedOut:!1}),k=function(e){var t=(new Date).getTime();return new Date(e).getTime()-t},N=function(e){var t,n=function(){console.log("getting stored token if it exists:");var e=localStorage.getItem("token"),t=localStorage.getItem("expireTime"),n=k(t);return console.log("results\n token:",e,"\n exp time:",t,"\n time left:",n,"ms"),n<=0?(console.log("access_t:",localStorage.getItem("accessToken"),"\n","expireTime:",localStorage.getItem("expireTime"),"\n","refresh_t",localStorage.getItem("refreshToken")),console.log("the local storage access token either does not exist, or is expired. clearing any local storage."),localStorage.removeItem("token"),localStorage.removeItem("expireTime"),localStorage.removeItem("refreshToken"),r&&(console.log("clearing Refresh timer."),clearTimeout(r)),{token:null,duration:null}):{token:e,duration:n}}();n&&(t=n.token);var s=Object(o.useState)(t),c=Object(O.a)(s,2),a=c[0],i=c[1],l=Object(o.useState)(!1),j=Object(O.a)(l,2),d=j[0],u=j[1],h=!!a;console.log("first, isloggedin:",h);var b=Object(o.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u(!!e),i(null),localStorage.removeItem("token"),localStorage.removeItem("expireTime"),localStorage.removeItem("refreshToken"),r&&clearTimeout(r)}),[]),g=function e(){var t,n;console.log("refreshing token that expires soon, or refreshing old stored token that was found to be expired on page load."),fetch(m+"api/refresh",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("refreshToken"))}}).then((function(e){if(e.ok)return e.json();console.log(e.status,e.statusText),console.log("auto-logging out."),b()})).then((function(s){t=s.access_token,n=new Date((new Date).getTime()+1e3*+s.expiration_time).toISOString(),console.log(n),i(t),localStorage.setItem("token",t),localStorage.setItem("expireTime",n);var c=k(n)/2;console.log("time until refresh",c),r&&(console.log("clearing it"),clearTimeout(r)),r=setTimeout(e,c)})).catch((function(e){e.cause="auth_context refresh handler",p(e)}))},x={token:a,isLoggedIn:h,login:function(e,t,n){i(e),localStorage.setItem("token",e),localStorage.setItem("expireTime",t),console.log(t),localStorage.setItem("refreshToken",n);var s=k(t);console.log("rem. time -------------",s);var c=s/2;console.log("time until refresh",c),r&&(console.log("clearing"),clearTimeout(r)),r=setTimeout(g,c)},logout:b,autoLoggedOut:d};return Object(v.jsx)(y.Provider,{value:x,children:e.children})},S=y,w=function(e){var t=Object(o.useContext)(S),n=Object(d.g)(),s=Object(o.useState)(""),c=Object(O.a)(s,2),a=c[0],r=c[1],i=Object(o.useState)(""),l=Object(O.a)(i,2),j=l[0],u=l[1],g=Object(o.useState)(!1),x=Object(O.a)(g,2),f=x[0],y=x[1],k=Object(o.useState)(""),N=Object(O.a)(k,2),w=N[0],C=N[1],T=Object(o.useState)(!1),P=Object(O.a)(T,2),I=P[0],q=P[1];function _(e){"username"===e.target.name&&r(e.target.value),"password"===e.target.name&&u(e.target.value)}function W(){return(W=Object(b.a)(h.a.mark((function e(s){var c,r,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),C(""),a&&j){e.next=6;break}return q(!0),C("Please fill in both fields."),e.abrupt("return");case 6:return y(!0),c={username:a,password:j},e.prev=8,e.next=11,fetch(m+"login",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}});case 11:return r=e.sent,e.next=14,r.json();case 14:if(o=e.sent,console.log(o),!o.error&&o.expiration_time){e.next=21;break}return q(!0),C(o.error),y(!1),e.abrupt("return");case 21:i=new Date((new Date).getTime()+1e3*+o.expiration_time),console.log("expireTime:",i.toISOString()),t.login(o.access_token,i.toISOString(),o.refresh_token),n.replace("/assessment"),e.next=33;break;case 27:e.prev=27,e.t0=e.catch(8),y(!1),C("Something went wrong while logging in. Please try again."),e.t0.cause="login fetch request",p(e.t0);case 33:case"end":return e.stop()}}),e,null,[[8,27]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){t.autoLoggedOut&&(q(!0),C("Your login session has expired."))}),[t.autoLoggedOut]),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"loginwindow",children:[Object(v.jsx)("h2",{children:"User Login"}),Object(v.jsxs)("form",{onSubmit:function(e){return W.apply(this,arguments)},method:"post",children:[Object(v.jsxs)("div",{className:"formGrid",children:[Object(v.jsx)("label",{htmlFor:"username",children:"Username"}),Object(v.jsx)("input",{onChange:_,name:"username",id:"username",type:"text",value:a}),Object(v.jsx)("label",{htmlFor:"password",children:"Password"}),Object(v.jsx)("input",{onChange:_,name:"password",id:"password",type:"password",value:j})]}),!f&&I&&Object(v.jsx)("div",{className:"messageBox messageBoxError",children:Object(v.jsx)("p",{children:w})}),f&&Object(v.jsxs)("div",{className:"loadingWrapper",children:[Object(v.jsx)("div",{className:"loading1"}),Object(v.jsx)("div",{className:"loading2"})]}),Object(v.jsx)("div",{className:"buttonWrapper",children:Object(v.jsx)("button",{type:"submit",children:"Log In"})})]})]})})},C=(n(42),n(43),n(7)),T=i.a.createContext({userTouch:!1,setUserTouch:function(){}}),P=!1,I=function(e){var t=Object(o.useState)(P),n=Object(O.a)(t,2),s=n[0],c=n[1],a={userTouch:!!s,setUserTouch:function(){s||(c(!0),P=!0)}};return Object(v.jsx)(T.Provider,{value:a,children:e.children})},q=T,_=function(){var e=Object(o.useContext)(S),t=(Object(o.useContext)(q).userTouch,e.isLoggedIn);return Object(v.jsx)("div",{className:"navBarWrapper",style:t?{minHeight:"180px"}:{minHeight:"4em"},children:t?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"headerLeftCol",children:[Object(v.jsx)("div",{className:"title",children:Object(v.jsx)(C.b,{className:"titleLink",to:"/",children:Object(v.jsx)("h1",{children:"Stroke Risk Assessment App"})})}),Object(v.jsxs)("nav",{className:"navLinksContainer",children:[Object(v.jsx)("div",{className:"navContainerSpacingEdge"}),Object(v.jsx)(C.b,{className:"link",id:"assessmentLink",to:"/assessment",activeClassName:"activeLink",children:Object(v.jsx)("span",{children:"Patient Assessment"})}),Object(v.jsx)(C.b,{className:"link",id:"dataLink",to:"/data",activeClassName:"activeLink",children:Object(v.jsx)("span",{children:"Data Visualizations"})}),Object(v.jsx)("div",{className:"navContainerAccentEdge"})]})]}),Object(v.jsxs)("div",{className:"headerRightCol",children:[Object(v.jsx)("div",{className:"linkContainer",children:Object(v.jsx)(C.b,{className:"appMonitoring",to:"/settings",activeClassName:"activeLink",children:Object(v.jsx)("span",{children:"App Monitoring"})})}),Object(v.jsx)("div",{className:"buttonContainer",children:Object(v.jsx)("button",{onClick:function(){e.logout(!1)},children:"Log Out"})})]})]}):Object(v.jsx)("div",{className:"loneTitle",children:Object(v.jsx)("h1",{children:"Stroke Risk Assessment App"})})})},W=(n(44),function(){return Object(v.jsx)("div",{className:"pageFooter",children:Object(v.jsxs)("span",{children:["\xa9 ",(new Date).getFullYear().toString()," \xa0 Jacob Watkins"]})})}),L=function(e){return Object(v.jsxs)("div",{className:"appwindow",children:[Object(v.jsx)(_,{}),e.children,Object(v.jsx)(W,{})]})},B=n(8),F=n(5),V=(n(45),function(e){return Object(v.jsxs)("div",{className:"questionBlock",children:[Object(v.jsx)("div",{className:"questionNo",children:Object(v.jsxs)("span",{children:[Object(v.jsx)("span",{className:"number",children:e.questionNumber}),"/10"]})}),Object(v.jsx)("p",{className:"questionText",children:e.question}),e.children]})}),A=function(e){var t=function(t){try{e.onRadioChange(t)}catch(n){n.cause="BinaryQuestionRadio event",p(n)}};return Object(v.jsxs)("div",{className:"radioContainer",children:[Object(v.jsxs)("div",{className:"labelInputPair",children:[Object(v.jsx)("input",{id:e.radioVal1,onClick:t,type:"radio",name:e.radioGroupName,required:!0,value:e.radioVal1}),Object(v.jsx)("label",{htmlFor:e.radioVal1,children:e.radioVal1Text})]}),Object(v.jsxs)("div",{className:"labelInputPair",children:[Object(v.jsx)("input",{id:e.radioVal2,onClick:t,type:"radio",name:e.radioGroupName,value:e.radioVal2}),Object(v.jsx)("label",{htmlFor:e.radioVal2,children:e.radioVal2Text})]})]})},D=function(e){return Object(v.jsxs)("div",{className:"inputContainer numericalLabelInputPair",children:[Object(v.jsx)("label",{htmlFor:e.name,children:e.name}),Object(v.jsx)("input",{disabled:e.isDisabled,name:e.name,type:"text",placeholder:e.placeholder,onChange:function(t){try{e.onValueChange(t)}catch(n){n.cause="NumericalQuestionInput event",p(n)}},required:!0,maxLength:e.maxLength})]})},E=function(e){var t=e.options;return Object(v.jsxs)("select",{name:e.name,onChange:function(t){try{e.onSelectChange(t)}catch(n){n.cause="TernaryQuestionSelect event",p(n)}},required:!0,children:[Object(v.jsx)("option",{value:"",children:"Select one option..."},0),t.map((function(e,t){return Object(v.jsx)("option",{value:e,children:e},t)}))]})},H=["Private company job (non-government)","Self-employed","Government job","Never worked","Stay-at-home parent"],R=["Never smoked","Formerly smoked","Currently smokes"],M=function(){var e=Object(o.useContext)(S),t=Object(o.useState)(!1),n=Object(O.a)(t,2),s=n[0],c=n[1],a=Object(o.useState)(!1),r=Object(O.a)(a,2),i=r[0],l=r[1],j=Object(o.useState)({proba:"",classify:""}),d=Object(O.a)(j,2),u=d[0],h=d[1],b=Object(o.useState)({sex:"",age:"",hyper:"",heart:"",married:"",worktype:"",restype:"",glucose:"",bmi:"",smoking:"",prevGlucoseVal:""}),g=Object(O.a)(b,2),x=g[0],f=g[1],y=Object(o.useState)({sex:!1,age:!1,hyper:!1,heart:!1,married:!1,worktype:!1,restype:!1,glucose:!1,bmi:!1,smoking:!1}),k=Object(O.a)(y,2),N=k[0],w=k[1],C=Object(o.useState)({age:!1,bmi:!1,glucose:!1}),T=Object(O.a)(C,2),P=T[0],I=T[1],q=Object(o.useState)(""),_=Object(O.a)(q,2),W=_[0],L=_[1],M=Object(o.useState)([]),z=Object(O.a)(M,2),G=z[0],Q=z[1],Y={sex:"1",age:"2",hyper:"3",heart:"4",married:"5",worktype:"6",restype:"7",glucose:"8",bmi:"9",smoking:"10"},U=Object(o.useRef)(),J=function(){U.current.scrollIntoView({behavior:"smooth"})},$=Object(o.useState)(!1),K=Object(O.a)($,2),X=K[0],Z=K[1];Object(o.useEffect)((function(){X&&J()}),[X]);var ee=function(e){try{var t=e.target,n=t.name,s=t.value;if("glucoseunknown"===n)return void c((function(e){return!e}));f((function(e){var t=Object(F.a)({},e);return t[n]=s,"glucose"===n&&(t.prevGlucoseVal=s),t}))}catch(a){a.cause="assessment form data",p(a)}};Object(o.useEffect)(Object(o.useCallback)((function(){s?(l(!0),f((function(e){var t=Object(F.a)({},e);return t.glucose=123.6,t}))):(l(!1),f((function(e){var t=Object(F.a)({},e);return t.glucose=t.prevGlucoseVal,t})))})),[s]);var te=function(t){Z(!1),fetch(m+"assessment",{method:"POST",body:JSON.stringify(x),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(t){if(t.ok)return t.json();422===t.status||401===t.status?e.logout(!0):L("Something went wrong with receiving the assessment results from the server. Please try again.")})).then((function(e){e.error?L("Something went wrong with receiving the assessment results from the server. Please try again."):(console.log("content of `data`:",JSON.stringify(e)),h({proba:e.proba,classify:e.classify}),Z(!0))})).catch((function(e){e.cause="submit assessment fetch request",p(e),L("Something went wrong with sending the assessment to the server. Please try again.")}))};return Object(v.jsxs)("div",{className:"assessmentWrapper",children:[Object(v.jsxs)("div",{className:"disclaimerWrapper",children:[Object(v.jsx)("h3",{children:"Disclaimer"}),Object(v.jsx)("hr",{}),Object(v.jsxs)("p",{children:["This website and the below assessment are not intended to diagnose, prevent, or treat any real medical condition. The material presented is part of an educational undertaking. ",Object(v.jsx)("br",{})," ",Object(v.jsx)("br",{}),"Please consult a doctor for any advice regarding diagnosis, prevention, or treatment of strokes and/or related conditions. "]})]}),Object(v.jsx)("h1",{className:"assessmentHeader",children:"Patient Assessment"}),Object(v.jsxs)("form",{children:[Object(v.jsx)("div",{}),Object(v.jsx)("div",{id:"assessmentSpace"}),N.sex&&Object(v.jsx)("div",{className:"message",children:Object(v.jsx)("span",{children:"Please select one of the options before submitting."})}),Object(v.jsx)(V,{question:"Select the patient's biological sex.",questionNumber:"1",children:Object(v.jsx)(A,{onRadioChange:ee,radioGroupName:"sex",radioVal1:"male",radioVal2:"female",radioVal1Text:"Male",radioVal2Text:"Female"})}),N.age&&Object(v.jsx)("div",{className:"message",children:Object(v.jsx)("span",{children:"Please enter an age value before submitting."})}),P.age&&Object(v.jsx)("div",{className:"message",children:Object(v.jsx)("span",{children:"Age must be a number."})}),Object(v.jsx)(V,{question:"Enter the patient's age.",questionNumber:"2",children:Object(v.jsx)(D,{onValueChange:ee,name:"age",placeholder:"27",maxLength:"3"})}),N.hyper&&Object(v.jsx)("div",{className:"message",children:Object(v.jsx)("span",{children:"Please select one of the options before submitting."})}),Object(v.jsx)(V,{question:"Does the patient have a history of hypertension?",questionNumber:"3",children:Object(v.jsx)(A,{onRadioChange:ee,radioGroupName:"hyper",radioVal1:"hyperYes",radioVal2:"hyperNo",radioVal1Text:"Yes",radioVal2Text:"No"})}),N.heart&&Object(v.jsx)("div",{className:"message",children:Object(v.jsx)("span",{children:"Please select one of the options before submitting."})}),Object(v.jsx)(V,{question:"Does the patient have a history of heart disease?",questionNumber:"4",children:Object(v.jsx)(A,{onRadioChange:ee,radioGroupName:"heart",radioVal1:"heartYes",radioVal2:"heartNo",radioVal1Text:"Yes",radioVal2Text:"No"})}),N.married&&Object(v.jsx)("div",{className:"message",children:Object(v.jsx)("span",{children:"Please select one of the options before submitting."})}),Object(v.jsx)(V,{question:"Is/was the patient currently or ever married?",questionNumber:"5",children:Object(v.jsx)(A,{onRadioChange:ee,radioGroupName:"married",radioVal1:"marryYes",radioVal2:"marryNo",radioVal1Text:"Yes",radioVal2Text:"No"})}),N.worktype&&Object(v.jsx)("div",{className:"message",children:Object(v.jsx)("span",{children:"Please select one of the options before submitting."})}),Object(v.jsx)(V,{question:"Select the option that best describes the patient's occupation type.",questionNumber:"6",children:Object(v.jsx)(E,{name:"worktype",options:H,onSelectChange:ee})}),N.restype&&Object(v.jsx)("div",{className:"message",children:Object(v.jsx)("span",{children:"Please select one of the options before submitting."})}),Object(v.jsx)(V,{question:"Select the option that best describes the patient's area of residence.",questionNumber:"7",children:Object(v.jsx)(A,{onRadioChange:ee,radioGroupName:"restype",radioVal1:"rural",radioVal2:"urban",radioVal1Text:"Rural",radioVal2Text:"Urban"})}),N.glucose&&Object(v.jsx)("div",{className:"message",children:Object(v.jsx)("span",{children:'Please enter an average glucose value (or check "Unknown") before submitting.'})}),P.glucose&&Object(v.jsx)("div",{className:"message",children:Object(v.jsx)("span",{children:"Average glucose must be a whole or decimal number."})}),Object(v.jsxs)(V,{question:'Enter the patient\'s average glucose levels (mg/dL) if known. Select "Unknown" if not known, and an average will be used.',questionNumber:"8",children:[Object(v.jsx)(D,{className:"glucoseInput",isDisabled:i,name:"glucose",placeholder:i?"":"100.0",onValueChange:ee,maxLength:"5"}),Object(v.jsxs)("div",{className:"checkBoxLabelWrapper",children:[Object(v.jsx)("label",{className:"pointer",htmlFor:"glucoseunknown",children:"Unknown"}),Object(v.jsx)("input",{className:"pointer",type:"checkbox",id:"glucoseunknown",name:"glucoseunknown",onChange:ee})]})]}),N.bmi&&Object(v.jsx)("div",{className:"message",children:Object(v.jsx)("span",{children:"Please enter a BMI value before submitting."})}),P.bmi&&Object(v.jsx)("div",{className:"message",children:Object(v.jsx)("span",{children:"BMI must be a whole or decimal number."})}),Object(v.jsx)(V,{question:"Enter the patient's BMI (Body Mass Index.)",questionNumber:"9",children:Object(v.jsx)(D,{name:"bmi",placeholder:"22.5",onValueChange:ee,maxLength:"5"})}),N.smoking&&Object(v.jsx)("div",{className:"message",children:Object(v.jsx)("span",{children:"Please select one of the options before submitting."})}),Object(v.jsx)(V,{question:"Select the option that best describes the patient's smoking status.",questionNumber:"10",children:Object(v.jsx)(E,{name:"smoking",options:R,onSelectChange:ee})}),(Object.values(N).some((function(e){return!0===e}))||Object.values(P).some((function(e){return!0===e})))&&Object(v.jsxs)("div",{className:"submitInfo",children:[Object(v.jsx)("p",{children:"Please fix the following questions before submitting:"}),Object(v.jsxs)("p",{children:[" ",function(){var e=[];return G.forEach((function(t){console.log(Y[t]),e.push(Y[t])})),(e=e.sort((function(e,t){return e-t}))).toString().replace(/\,/g,", ")}()]})]}),Object(v.jsx)("div",{id:"assessmentSpace"}),Object(v.jsx)("button",{onClick:function(e){e.preventDefault(),L(""),w({sex:!1,age:!1,hyper:!1,heart:!1,married:!1,worktype:!1,restype:!1,glucose:!1,bmi:!1,smoking:!1}),I({age:!1,bmi:!1,glucose:!1}),Q([]),h({proba:"",classify:""});var t=!0,n={age:!1,glucose:!1,bmi:!1},s=function(e){if("prevGlucoseVal"===e)return"continue";if(!1===!!x[e]){t=!1;var s=Object.keys(N).find((function(t){return t===e}));w((function(e){var t=Object(F.a)({},e);return t[s]=!0,t})),Q((function(e){return[].concat(Object(B.a)(e),[s])})),Object.keys(n).includes(s)&&(n[s]=!0)}};for(var c in x)s(c);if(!n.age){/^[1-9]\d{0,2}$/.test(x.age)||(t=!1,I((function(e){var t=Object(F.a)({},e);return t.age=!0,t})),Q((function(e){return[].concat(Object(B.a)(e),["age"])})))}var a=/^[1-9]\d{0,4}$/,r=/^[1-9]\d{0,2}\.\d{1,3}$/;n.glucose||(console.log(a.test(x.glucose)),console.log(r.test(x.glucose)),a.test(x.glucose)||r.test(x.glucose)||(t=!1,I((function(e){var t=Object(F.a)({},e);return t.glucose=!0,t})),Q((function(e){return[].concat(Object(B.a)(e),["glucose"])})))),n.bmi||(console.log(a.test(x.bmi)),console.log(r.test(x.bmi)),a.test(x.bmi)||r.test(x.bmi)||(t=!1,I((function(e){var t=Object(F.a)({},e);return t.bmi=!0,t})),Q((function(e){return[].concat(Object(B.a)(e),["bmi"])})))),console.log("input valid:",t),t&&te(e)},type:"submit",children:"Submit Assessment"})]}),""!==W&&Object(v.jsx)("div",{className:"submitInfo",children:Object(v.jsx)("p",{children:W})}),Object(v.jsx)("div",{id:"assessmentSpace"}),""!==u.proba&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"resultsContainer",onLoad:J,ref:U,children:[Object(v.jsx)("h2",{children:"Assessment Results"}),Object(v.jsx)("hr",{}),Object(v.jsx)("span",{className:"resultsLarge",children:u.proba}),Object(v.jsx)("span",{className:"caption",children:"Calculated current likelihood of stroke in lifetime of patient"}),Object(v.jsxs)("p",{children:["Based on the patient's data, the patient is ",Object(v.jsx)("u",{children:u.proba})," likely to have a stroke in their lifetime."]}),1===u.classify&&Object(v.jsxs)("span",{children:["Given the assessment results, ",Object(v.jsx)("br",{})," ",Object(v.jsx)("u",{children:"the patient is at an increased risk of having a stroke."})," ",Object(v.jsx)("br",{})," ",Object(v.jsx)("br",{})," The patient should be given medical advice on how to lower their current stroke risk."]}),0===u.classify&&Object(v.jsxs)("span",{children:["Given the assessment results,",Object(v.jsx)("br",{})," ",Object(v.jsx)("u",{children:"the patient is not at immediate risk of having a stroke."}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),"The patient should simply continue to practice healthy lifestyle habits in order to ensure their risk of stroke remains low."]})]}),Object(v.jsx)("div",{className:"spacing"})]})]})},z=n(12),G=(n(46),n(24)),Q=n.n(G),Y=n(25),U=function(e){var t,n=Object(o.useState)(!0),s=Object(O.a)(n,2),c=s[0],a=s[1];Object(o.useRef)(null);"BASE"===e.type?t=!0:"ANDOR"===e.type&&(t=!1);var r=["id","age","avg_glucose","bmi"];Object(o.useEffect)((function(){}),[]);var i=function(t){try{var n=t.target,s=n.name;n.value;"attribute"===s&&function(e){try{var t=e.target.value;r.includes(t)?a(!0):a(!1)}catch(n){n.cause="QueryStatement event",p(n)}}(t),e.onStatementChange(t,e.id)}catch(c){c.cause="QueryStatement event",p(c)}};return Object(v.jsxs)("div",{className:"querySentence",children:[t?Object(v.jsx)("p",{children:"Select all patients where:"}):Object(v.jsxs)("select",{id:"chainOp",onChange:i,name:"chaining_op",children:[Object(v.jsx)("option",{children:"and"}),Object(v.jsx)("option",{children:"or"})]}),Object(v.jsxs)("select",{onChange:i,name:"attribute",className:"selectField",children:[Object(v.jsx)("option",{value:"id",children:"Id No."}),Object(v.jsx)("option",{value:"sex",children:"Gender"}),Object(v.jsx)("option",{value:"age",children:"Age"}),Object(v.jsx)("option",{value:"hyper",children:"Hypertension"}),Object(v.jsx)("option",{value:"heart_d",children:"Heart Disease"}),Object(v.jsx)("option",{value:"ever_married",children:"Ever Married"}),Object(v.jsx)("option",{value:"worktype",children:"Work Type"}),Object(v.jsx)("option",{value:"restype",children:"Residence Type"}),Object(v.jsx)("option",{value:"avg_glucose",children:"Avg. Blood Glucose, mg/dL"}),Object(v.jsx)("option",{value:"bmi",children:"BMI (Body Mass Index)"}),Object(v.jsx)("option",{value:"smoking",children:"Smoking Status"}),Object(v.jsx)("option",{value:"stroke",children:"Had Stroke"})]}),Object(v.jsxs)("select",{onChange:i,name:"operator",className:"selectField",children:[Object(v.jsx)("option",{value:"equals",children:"is equal to"}),Object(v.jsx)("option",{value:"notequals",children:"is not equal to"}),c&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("option",{value:"greaterthan",children:"is greater than"}),Object(v.jsx)("option",{value:"lessthan",children:"is less than"}),Object(v.jsx)("option",{value:"greaterthanequal",children:"is greater than or equal to"}),Object(v.jsx)("option",{value:"lessthanequal",children:"is less than or equal to"})]}),Object(v.jsx)("option",{value:"contains",children:"contains"}),Object(v.jsx)("option",{value:"notcontains",children:"does not contain"})]}),Object(v.jsx)("input",{onBlur:i,name:"attributeval",type:"text"})]})},J=n.n(Y)()(Q.a),$=function(){var e=Object(o.useContext)(S),t=Object(o.useState)([]),n=Object(O.a)(t,2),s=n[0],c=n[1],a=Object(o.useState)([]),r=Object(O.a)(a,2),i=r[0],l=r[1],j=Object(o.useState)(!1),d=Object(O.a)(j,2),u=d[0],h=d[1],b=Object(o.useState)(!0),g=Object(O.a)(b,2),x=g[0],f=g[1],y=Object(o.useState)(!1),k=Object(O.a)(y,2),N=k[0],w=k[1],C=Object(o.useState)({0:{statement_id:0,type:"base",chaining_op:null,attribute:"id",operator:"equals",attributeval:null}}),T=Object(O.a)(C,2),P=T[0],I=T[1],_=Object(o.useState)(!1),W=Object(O.a)(_,2),L=W[0],V=W[1],A=Object(o.useState)(""),D=Object(O.a)(A,2),E=D[0],H=D[1],R=Object(o.useState)(!1),M=Object(O.a)(R,2),G=(M[0],M[1]),Q=Object(o.useState)(!1),Y=Object(O.a)(Q,2),$=(Y[0],Y[1],Object(o.useState)(!1)),K=Object(O.a)($,2),X=(K[0],K[1]),Z=Object(o.useState)(!1),ee=Object(O.a)(Z,2),te=(ee[0],ee[1]),ne=Object(o.useState)(!1),se=Object(O.a)(ne,2),ce=(se[0],se[1]),ae=Object(o.useState)(!1),re=Object(O.a)(ae,2),oe=(re[0],re[1]),ie="#FFF",le="#000",je=Object(o.useState)("bp"),de=Object(O.a)(je,2),ue=de[0],he=de[1],be=Object(o.useState)({data:null,layout:null,config:null}),Oe=Object(O.a)(be,2),me=Oe[0],ge=Oe[1],xe=Object(o.useState)({data:null,layout:null,config:null}),pe=Object(O.a)(xe,2),fe=pe[0],ve=pe[1],ye=Object(o.useState)({data:null,layout:null,config:null}),ke=Object(O.a)(ye,2),Ne=ke[0],Se=ke[1],we=Object(o.useState)({data:null,layout:null,config:null}),Ce=Object(O.a)(we,2),Te=Ce[0],Pe=Ce[1],Ie=Object(o.useState)({data:null,layout:null,config:null}),qe=Object(O.a)(Ie,2),_e=qe[0],We=qe[1],Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.filter((function(e){return 0===e.stroke&&0===e.hyper})),c=e.filter((function(e){return 0===e.stroke&&1===e.hyper})),a=e.filter((function(e){return 1===e.stroke&&0===e.hyper})),r=e.filter((function(e){return 1===e.stroke&&1===e.hyper})),o={x:["Never had stroke","Had stroke in lifetime"],y:[n.length,a.length],name:"Not hypertensive",type:"bar"},i={x:["Never had stroke","Had stroke in lifetime"],y:[c.length,r.length],name:"Hypertensive",type:"bar"},l=[o,i],j={barmode:"group",title:"Stroke Frequency by Blood Pressure Status"},d={responsive:!0};t?vt({data:l,layout:j,config:d}):Se({data:l,layout:j,config:d}),X(!1)},Be=function(e){var t=e.id,n=e.gender,s=e.age,c=e.hyper,a=e.heart_d,r=e.avg_glucose,o=e.bmi;e.stroke;return"id#: ".concat(t,"; gender: ").concat(n,"; age: ").concat(s,"; hyper: ").concat(c,"; heart_d: ").concat(a,"; avg_glucose: ").concat(r,"; bmi: ").concat(o)},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.filter((function(e){return 0===e.stroke&&0===e.heart_d})),c=e.filter((function(e){return 0===e.stroke&&1===e.heart_d})),a=e.filter((function(e){return 1===e.stroke&&0===e.heart_d})),r=e.filter((function(e){return 1===e.stroke&&1===e.heart_d})),o={x:["Never had stroke","Had stroke in lifetime"],y:[n.length,a.length],name:"No Heart Disease",type:"bar",marker:{color:"green"}},i={x:["Never had stroke","Had stroke in lifetime"],y:[c.length,r.length],name:"Has Heart Disease",type:"bar",marker:{color:"salmon"}},l=[o,i],j={barmode:"group",title:"Stroke Frequency by Heart Disease Status"},d={responsive:!0};t?vt({data:l,layout:j,config:d}):Pe({data:l,layout:j,config:d}),X(!1)},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.filter((function(e){return 0===e.stroke})),c=e.filter((function(e){return 1===e.stroke})),a={x:n.map((function(e){return e.age})),y:n.map((function(e){return e.avg_glucose})),mode:"markers",name:"No Stroke",text:n.map((function(e){return Be(e)})),type:"scatter",marker:{color:"blue"}},r={x:c.map((function(e){return e.age})),y:c.map((function(e){return e.avg_glucose})),mode:"markers",name:"Had Stroke in Lifetime",text:c.map((function(e){return Be(e)})),type:"scatter",marker:{color:"red"}},o=[a,r],i={title:"Stroke Incidence as a function of Age and Average Glucose Level",xaxis:{title:"Age, yrs",autotick:!1,showticklabels:!0,ticks:"outside",dtick:10,showgrid:!0,zeroline:!0,showline:!0},yaxis:{title:"Avg. Blood Glucose, mg/dL",autotick:!1,showticklabels:!0,ticks:"outside",dtick:50,showgrid:!0,zeroline:!0,showline:!0},legend:{orientation:"h",y:-.2},margin:{}},l={responsive:!0};te(!1),t?vt({data:o,layout:i,config:l}):ve({data:o,layout:i,config:l})};Object(o.useEffect)((function(){var t=!1;return t||(c([]),fetch(m+"api/patients",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(t){if(t.ok)return t.json();if(422!==t.status&&401!==t.status)throw new Error("something went wrong getting the patient data from the server.");e.logout(!0)})).then((function(e){e.hasOwnProperty("errormsg")?console.log(e.errormsg):(console.log("it's set"),c(e))})).catch((function(e){e.cause="patient data fetch request",p(e)}))),function(){t=!0}}),[]),Object(o.useEffect)((function(){for(var e=["Will not have stroke","Will have stroke"],t=["Did not have stroke","Had stroke"],n=[[34,6],[9,23]],s=[{x:e,y:t,z:n,type:"heatmap",colorscale:[[0,"#ffaea8"],[.5,"#ff5447"],[1,"#520500"]]}],c={margin:{t:150,l:150,r:150,b:130,pad:4},title:"Confusion Matrix - Model Performance",annotations:[],showlegend:!0,legend:{x:0,y:0,traceorder:"normal",font:{family:"sans-serif",size:12,color:"#000"},bgcolor:"#E2E2E2",bordercolor:"#FFFFFF",borderwidth:2}},a=0;a<t.length;a++)for(var r=0;r<e.length;r++){var o=n[a][r],i={xref:"x1",yref:"y1",x:e[r],y:t[a],text:o,font:{family:"sans-serif",size:20,color:o>25?"white":"black"},showarrow:!1};c.annotations.push(i)}We({data:s,layout:c,config:{responsive:!0}}),ce(!1)}),[]),Object(o.useEffect)((function(){for(var e=["age","hyper","heart_d","avg_glucose","bmi","stroke"],t=["age","hyper","heart_d","avg_glucose","bmi","stroke"],n=[[1,.25711,.26674,.249023,-.012788,.512787],[.25711,1,.094666,.174113,.113003,.168053],[.26674,.094666,1,.253447,.018437,.186316],[.249023,.174113,.253447,1,.229055,.230373],[-.012788,.113003,.018437,.229055,1,-.037703],[.512787,.168053,.186316,.230373,-.037703,1]],s=[{x:e,y:t,z:n,type:"heatmap",colorscale:[[0,"#ffe2b0"],[.5,"#FFA500"],[1,"#7d3c00"]]}],c={title:"Correlation Matrix Heatmap - Major Features",xaxis:{automargin:!0},annotations:[],yaxis:{automargin:!0},margin:{l:100,r:110},autosize:!0},a=0;a<t.length;a++)for(var r=0;r<e.length;r++){var o=n[a][r],i=void 0;i=Math.abs(o)<.1?o.toPrecision(1):o.toPrecision(2);var l=void 0;l=o>.7?"white":"black";var j=Object(z.a)({xref:"x1",yref:"y1",x:e[r],y:t[a],text:i,font:{family:"Questrial",color:"black"},showarrow:!1},"font",{color:l});c.annotations.push(j)}ge({data:s,layout:c,config:{responsive:!0,modeBarButtonsToRemove:["zoom2d","pan2d","select2d","lasso2d","zoomIn2d","zoomOut2d"]}}),G(!1)}),[]),Object(o.useEffect)(Ve,[s]),Object(o.useEffect)(Le,[s]),Object(o.useEffect)(Fe,[s]);var Ae=["greaterthan","lessthan","greaterthanequal","lessthanequal"],De=["id","age","avg_glucose","bmi"],Ee=function(e,t){try{I((function(n){var s=e.target,c=s.name,a=s.value,r=Object(F.a)({},n);if(console.log(e.target,c,a),"attribute"===c){console.log("NAME:",c,"VAL:",a),console.log("Old attribute name:",r[t][c]);var o=r[t][c],i=r[t].operator;De.includes(o)&&!De.includes(a)&&Ae.includes(i)&&(console.log("the old attribute is part of the numeric values, AND the new attribute is non-numeric, ANNNND the old operator was an inequality operator. \n You know what to do."),r[t].operator="equals")}return r[t][c]=a,r}))}catch(L){L.cause="update custom query state object",p(L)}},He=Object(o.useState)([Object(v.jsx)(U,{id:0,onStatementChange:Ee,type:"BASE"},0)]),Re=Object(O.a)(He,2),Me=Re[0],ze=Re[1];Object(o.useEffect)((function(){"bp"===ue?Le(i,!0):"hd"===ue?Fe(i,!0):"avg"===ue&&Ve(i,!0)}),[i,ue]);var Ge=Object(o.useState)(11),Qe=Object(O.a)(Ge,2),Ye=(Qe[0],Qe[1],Object(o.useContext)(q).userTouch);Object(o.useEffect)((function(){Ye&&(console.log("Interactive mode is being disabled for all plots (first user touch received)."),Ke(!1),tt(!1),at(!1),lt(!1),ht(!1),gt(!1))}),[Ye]);var Ue=Object(o.useState)(!0),Je=Object(O.a)(Ue,2),$e=Je[0],Ke=Je[1],Xe=Object(o.useState)(!0),Ze=Object(O.a)(Xe,2),et=Ze[0],tt=Ze[1],nt=Object(o.useState)(!0),st=Object(O.a)(nt,2),ct=st[0],at=st[1],rt=Object(o.useState)(!0),ot=Object(O.a)(rt,2),it=ot[0],lt=ot[1],jt=Object(o.useState)(!0),dt=Object(O.a)(jt,2),ut=dt[0],ht=dt[1],bt=Object(o.useState)(!0),Ot=Object(O.a)(bt,2),mt=Ot[0],gt=Ot[1],xt=Object(o.useState)({data:null,layout:null,config:null}),pt=Object(O.a)(xt,2),ft=pt[0],vt=pt[1];return Object(v.jsxs)("div",{className:"dataVisualsWrapper",children:[Object(v.jsx)("div",{className:"space"}),Object(v.jsx)("h1",{className:"dataPageTitle",children:"Data Visualizations & Dataset"}),Object(v.jsx)("div",{className:"space"}),Object(v.jsx)("h2",{className:"plotsTitle",children:"Plots"}),Object(v.jsxs)("div",{className:"infoBox",children:[Object(v.jsx)("div",{className:"switchWrapper",children:Object(v.jsxs)("div",{className:"demonstrativePlotSwitchContainer",children:[Object(v.jsx)("label",{children:"interactive:"}),Object(v.jsx)("input",{id:"demonstrativeCheckbox",className:"interactivePlotSwitch_Off",type:"checkbox",style:{backgroundColor:"teal"}})]})}),Object(v.jsx)("span",{id:"plotswitchcaption",children:"plot interactive mode switch"}),Object(v.jsx)("span",{children:"Click or tap the interactive mode switch for each plot to toggle the plot's interactive mode."})]}),Object(v.jsx)("div",{className:"infoBox scrollInfo",children:Object(v.jsx)("p",{children:"Each plot can be scrolled horizontally to view all of its content."})}),Object(v.jsxs)("div",{className:"plotWrapper",children:[Object(v.jsxs)("div",{className:"plotSwitchPairWrapper",children:[Object(v.jsx)("div",{className:"switchWrapper",children:Object(v.jsxs)("div",{className:"interactivePlotSwitchContainer",children:[Object(v.jsx)("label",{htmlFor:"plot1int",children:"interactive:"}),Object(v.jsx)("input",{id:"plot1int",className:$e?"interactivePlotSwitch_On":"interactivePlotSwitch_Off",type:"checkbox",onChange:function(){Ke((function(e){return!e}))},style:{backgroundColor:$e?ie:le}})]})}),Object(v.jsxs)("div",{className:"plot1",style:{backgroundColor:$e?"rgba(255, 255, 255, 1.0)":"rgba(255, 255, 255, 0.9)"},children:[Object(v.jsx)(J,{className:"responsivePlotWidth",data:me.data,layout:me.layout,config:me.config,useResizeHandler:!0,style:{borderColor:$e?"rgb(114, 87, 204)":"lightgrey"}}),Object(v.jsx)("div",{className:"responsivePlotWidth plot1screen",style:{display:$e?"none":"block"}})]})]}),Object(v.jsxs)("div",{className:"plotSwitchPairWrapper",children:[Object(v.jsx)("div",{className:"switchWrapper",children:Object(v.jsxs)("div",{className:"interactivePlotSwitchContainer",children:[Object(v.jsx)("p",{children:"interactive:"}),Object(v.jsx)("input",{className:et?"interactivePlotSwitch_On":"interactivePlotSwitch_Off",type:"checkbox",onChange:function(){tt((function(e){return!e}))},style:{backgroundColor:et?ie:le}})]})}),Object(v.jsxs)("div",{className:"plot2 scatter",style:{backgroundColor:et?"rgba(255, 255, 255, 1.0)":"rgba(255, 255, 255, 0.9)"},children:[Object(v.jsx)(J,{className:"responsivePlotWidth",data:fe.data,layout:fe.layout,config:fe.config,useResizeHandler:!0}),Object(v.jsx)("div",{className:"responsivePlotWidth plot2screen",style:{display:et?"none":"block"}})]})]}),Object(v.jsxs)("div",{className:"plotSwitchPairWrapper",children:[Object(v.jsx)("div",{className:"switchWrapper",children:Object(v.jsxs)("div",{className:"interactivePlotSwitchContainer",children:[Object(v.jsx)("p",{children:"interactive:"}),Object(v.jsx)("input",{className:ct?"interactivePlotSwitch_On":"interactivePlotSwitch_Off",type:"checkbox",onChange:function(){at((function(e){return!e}))},style:{backgroundColor:ct?ie:le}})]})}),Object(v.jsxs)("div",{className:"plot3",style:{backgroundColor:ct?"rgba(255, 255, 255, 1.0)":"rgba(255, 255, 255, 0.9)"},children:[Object(v.jsx)(J,{className:"responsivePlotWidth",data:Ne.data,layout:Ne.layout,config:Ne.config,useResizeHandler:!0}),Object(v.jsx)("div",{className:"responsivePlotWidth plot3screen",style:{display:ct?"none":"block"}})]})]}),Object(v.jsxs)("div",{className:"plotSwitchPairWrapper",children:[Object(v.jsx)("div",{className:"switchWrapper",children:Object(v.jsxs)("div",{className:"interactivePlotSwitchContainer",children:[Object(v.jsx)("p",{children:"interactive:"}),Object(v.jsx)("input",{className:it?"interactivePlotSwitch_On":"interactivePlotSwitch_Off",type:"checkbox",onChange:function(){lt((function(e){return!e}))},style:{backgroundColor:it?ie:le}})]})}),Object(v.jsxs)("div",{className:"plot4",style:{backgroundColor:it?"rgba(255, 255, 255, 1.0)":"rgba(255, 255, 255, 0.9)"},children:[Object(v.jsx)(J,{className:"responsivePlotWidth",data:Te.data,layout:Te.layout,config:Te.config,useResizeHandler:!0}),Object(v.jsx)("div",{className:"responsivePlotWidth plot4screen",style:{display:it?"none":"block"}})]})]}),Object(v.jsxs)("div",{className:"plotSwitchPairWrapper",children:[Object(v.jsx)("div",{className:"switchWrapper",children:Object(v.jsxs)("div",{className:"interactivePlotSwitchContainer",children:[Object(v.jsx)("p",{children:"interactive:"}),Object(v.jsx)("input",{className:ut?"interactivePlotSwitch_On":"interactivePlotSwitch_Off",type:"checkbox",onChange:function(){ht((function(e){return!e}))},style:{backgroundColor:ut?ie:le}})]})}),Object(v.jsxs)("div",{className:"plot5",style:{backgroundColor:ut?"rgba(255, 255, 255, 1.0)":"rgba(255, 255, 255, 0.9)"},children:[Object(v.jsx)(J,{className:"responsivePlotWidth plot5container",data:_e.data,layout:_e.layout,config:_e.config,useResizeHandler:!0}),Object(v.jsx)("div",{className:"responsivePlotWidth plot5screen",style:{display:ut?"none":"block"}})]})]})]}),Object(v.jsx)("hr",{className:"sectionBreak"}),Object(v.jsxs)("div",{className:"performanceBox",children:[Object(v.jsx)("h2",{className:"modelPerfTitle",children:"Model Performance Evaluation"}),Object(v.jsx)("h2",{className:"smallTableHeader",children:"Confusion Matrix Results Breakdown"}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"tableOuterWrapper",children:Object(v.jsx)("div",{className:"tableInnerWrapper",children:Object(v.jsxs)("table",{className:"scoreTable",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Correct Positive Predictions"}),Object(v.jsx)("th",{children:"Correct Negative Predictions"}),Object(v.jsx)("th",{children:"No. of False Positives"}),Object(v.jsx)("th",{children:"No. of False Negatives"})]})}),Object(v.jsx)("tbody",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"23"}),Object(v.jsx)("td",{children:"34"}),Object(v.jsx)("td",{children:"6"}),Object(v.jsx)("td",{children:"9"})]})})]})})}),Object(v.jsx)("h2",{className:"smallTableHeader",children:"Evaluation Performance Metrics Table"}),Object(v.jsx)("p",{className:"headerSubText",children:"Calculated using Scikit-Learn metrics module"}),Object(v.jsx)("div",{className:"tableOuterWrapper",children:Object(v.jsx)("div",{className:"tableInnerWrapper",children:Object(v.jsxs)("table",{className:"scoreTable",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Accuracy Score"}),Object(v.jsx)("th",{children:"Precision Score"}),Object(v.jsx)("th",{children:"Recall Score"}),Object(v.jsx)("th",{children:"F1 Score"})]})}),Object(v.jsx)("tbody",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"79.2%"}),Object(v.jsx)("td",{children:"79.3%"}),Object(v.jsx)("td",{children:"72%"}),Object(v.jsx)("td",{children:"75%"})]})})]})})}),Object(v.jsx)("h2",{className:"smallTableHeader",children:"Cross-Validation Score Data"}),Object(v.jsx)("p",{className:"headerSubText",children:"Obtained by performing 10-fold cross-validation of model"}),Object(v.jsx)("div",{className:"tableOuterWrapper",children:Object(v.jsx)("div",{className:"tableInnerWrapper",children:Object(v.jsxs)("table",{className:"scoreTable",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Mean Cross-validated Accuracy Score"}),Object(v.jsx)("th",{children:"Standard Deviation"})]})}),Object(v.jsx)("tbody",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"75.3%"}),Object(v.jsx)("td",{children:"0.084"})]})})]})})})]}),Object(v.jsx)("h2",{className:"custPlotTitle",children:" Custom Plot and Queries"}),Object(v.jsx)("div",{className:"plotWrapper",children:Object(v.jsxs)("div",{className:"plotSwitchPairWrapper",children:[Object(v.jsx)("div",{className:"switchWrapper",children:Object(v.jsxs)("div",{className:"interactivePlotSwitchContainer",children:[Object(v.jsx)("p",{children:"interactive:"}),Object(v.jsx)("input",{className:mt?"interactivePlotSwitch_On":"interactivePlotSwitch_Off",type:"checkbox",onChange:function(){gt((function(e){return!e}))},style:{backgroundColor:mt?ie:le}})]})}),Object(v.jsxs)("div",{className:"custPlot",style:{backgroundColor:mt?"rgba(255, 255, 255, 1.0)":"rgba(255, 255, 255, 0.9)"},children:[Object(v.jsx)(J,{className:"responsivePlotWidth",data:ft.data,layout:ft.layout,config:ft.config,useResizeHandler:!0}),!u&&0===i.length&&Object(v.jsx)("div",{className:"custTooltip",children:Object(v.jsx)("span",{children:"Fit custom query results to a plot here by running a custom query below."})}),Object(v.jsx)("div",{className:"responsivePlotWidth custPlotScreen",style:{display:mt?"none":"block"}})]})]})}),Object(v.jsx)("div",{children:Object(v.jsxs)("div",{class:"infoBox",children:[Object(v.jsx)("p",{children:"Custom Plot to Show:"}),Object(v.jsxs)("select",{onChange:function(e){try{var t=e.target.value;console.log(t),oe(!0),("bp"===t||"hd"===t||"avg"===t)&&he(t),oe(!1)}catch(L){L.cause="handleCustPlotSelect event",p(L)}},children:[Object(v.jsx)("option",{value:"bp",children:"Stroke Freq. by Blood Pressure Status"}),Object(v.jsx)("option",{value:"hd",children:"Stroke Freq. by Heart Disease Status"}),Object(v.jsx)("option",{value:"avg",children:"Stroke Freq. as a function of Age and Average Glucose Level"})]})]})}),Object(v.jsxs)("div",{className:"queryContainer",children:[Object(v.jsx)("h2",{children:"Custom Query Builder"}),Object(v.jsx)("span",{id:"note",children:"(Text searches are case-sensitive)"}),Object(v.jsxs)("p",{id:"conditions",children:["Query Conditions: ",Me.length,"/4"]}),L&&Object(v.jsx)("p",{className:"errorMessage",children:E}),Object(v.jsx)("button",{onClick:function(){if(4===Me.length)return V(!0),void H("Max 4 query conditions allowed.");V(!1),ze((function(e){return[].concat(Object(B.a)(e),[Object(v.jsx)(U,{id:Me.length,onStatementChange:Ee,type:"ANDOR"},Me.length)])})),I((function(e){var t=Object(F.a)({},e);return t[Me.length]={statement_id:Me.length,type:"andor",chaining_op:"and",attribute:"id",operator:"equals",attributeval:null},t}))},children:"Add Condition"}),Object(v.jsx)("button",{onClick:function(){1!==Me.length?(I((function(e){var t=Object(F.a)({},e);return delete t[Me.length-1],t})),V(!1),ze((function(e){return e.splice(Me.length-1,1),Object(B.a)(e)}))):console.log("no added conditions to delete.")},children:"Remove Condition"}),Object(v.jsxs)("form",{children:[Object(v.jsx)("div",{children:Me}),Object(v.jsx)("button",{onClick:function(t){try{t.preventDefault(),w(!1),h(!0),l([])}catch(L){L.cause="runQuery method before fetch",p(L)}fetch(m+"api/customquery",{method:"POST",body:JSON.stringify(P),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(t){if(t.ok)return t.json();422!==t.status&&401!==t.status||e.logout(!0)})).then((function(e){l(e),h(!1),w(!0),console.log(e)})).catch((function(e){e.cause="runQuery fetch request",p(e)}))},type:"submit",children:"Run Query"})]}),u&&Object(v.jsx)("p",{children:"Loading..."})]}),Object(v.jsx)("button",{className:"datasetControl",onClick:function(){try{w((function(e){return!e}))}catch(L){L.cause="toggleViewCustom event",p(L)}},children:N?"Hide custom query result":"Show custom query result"}),N&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h2",{className:"resultsHeader",children:" Custom Query Results "}),!u&&Object(v.jsxs)("p",{className:"resultsInfo",children:[i.length," result",1!==i.length&&"s"," returned for query."]})]}),Object(v.jsx)("div",{className:N?"tableOuterWrapper":"tableOuterWrapper_collapsed",children:Object(v.jsx)("div",{className:"tableInnerWrapper",children:Object(v.jsxs)("table",{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Id No."}),Object(v.jsx)("th",{children:"Gender"}),Object(v.jsx)("th",{children:"Age"}),Object(v.jsx)("th",{children:"Hypertension"}),Object(v.jsx)("th",{children:"Heart Disease"}),Object(v.jsx)("th",{children:"Ever Married"}),Object(v.jsx)("th",{children:"Work Type"}),Object(v.jsx)("th",{children:"Residence Type"}),Object(v.jsx)("th",{children:"Avg. Blood Glucose, mg/dL"}),Object(v.jsx)("th",{children:"BMI (Body Mass Index)"}),Object(v.jsx)("th",{children:"Smoking Status"}),Object(v.jsx)("th",{children:"Had Stroke"})]})}),Object(v.jsxs)("tbody",{children:[!u&&i.length<1&&Object(v.jsx)("tr",{children:Object(v.jsx)("td",{colSpan:"12",children:"(No data.)"})}),i.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.id}),Object(v.jsx)("td",{children:e.gender}),Object(v.jsx)("td",{children:e.age}),Object(v.jsx)("td",{children:e.hyper}),Object(v.jsx)("td",{children:e.heart_d}),Object(v.jsx)("td",{children:e.ever_married}),Object(v.jsx)("td",{children:e.work_type}),Object(v.jsx)("td",{children:e.res_type}),Object(v.jsx)("td",{children:e.avg_glucose}),Object(v.jsx)("td",{children:e.bmi}),Object(v.jsx)("td",{children:e.smoking}),Object(v.jsx)("td",{children:e.stroke})]},"custtable"+e.id)}))]})]})})}),Object(v.jsx)("br",{}),Object(v.jsx)("button",{className:"datasetControl",onClick:function(){try{f((function(e){return!e}))}catch(L){L.cause="toggleView event",p(L)}},children:x?"Hide full dataset":"Show full dataset"}),x&&Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("h2",{className:"fullDataSetTitle",children:" Full Dataset "})}),Object(v.jsx)("div",{className:x?"tableOuterWrapper":"tableOuterWrapper_collapsed",children:Object(v.jsx)("div",{className:"tableInnerWrapper",children:Object(v.jsxs)("table",{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Id No."}),Object(v.jsx)("th",{children:"Gender"}),Object(v.jsx)("th",{children:"Age"}),Object(v.jsx)("th",{children:"Hypertension"}),Object(v.jsx)("th",{children:"Heart Disease"}),Object(v.jsx)("th",{children:"Ever Married"}),Object(v.jsx)("th",{children:"Work Type"}),Object(v.jsx)("th",{children:"Residence Type"}),Object(v.jsx)("th",{children:"Avg. Blood Glucose, mg/dL"}),Object(v.jsx)("th",{children:"BMI (Body Mass Index)"}),Object(v.jsx)("th",{children:"Smoking Status"}),Object(v.jsx)("th",{children:"Had Stroke"})]})}),Object(v.jsx)("tbody",{children:s.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.id}),Object(v.jsx)("td",{children:e.gender}),Object(v.jsx)("td",{children:e.age}),Object(v.jsx)("td",{children:e.hyper}),Object(v.jsx)("td",{children:e.heart_d}),Object(v.jsx)("td",{children:e.ever_married}),Object(v.jsx)("td",{children:e.work_type}),Object(v.jsx)("td",{children:e.res_type}),Object(v.jsx)("td",{children:e.avg_glucose}),Object(v.jsx)("td",{children:e.bmi}),Object(v.jsx)("td",{children:e.smoking}),Object(v.jsx)("td",{children:e.stroke})]},"fulltable"+e.id)}))})]})})}),!x&&Object(v.jsx)("div",{className:"spacingBottom"})]})},K=(n(47),function(){var e=Object(o.useState)([]),t=Object(O.a)(e,2),n=t[0],s=t[1],c=Object(o.useState)("none"),a=Object(O.a)(c,2),r=(a[0],a[1],Object(o.useState)("")),i=Object(O.a)(r,2),l=i[0],j=i[1];return Object(v.jsxs)("div",{className:"settingsWrapper",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"settingsSpacingTop"}),Object(v.jsx)("h2",{children:"App Monitoring"})]}),Object(v.jsx)("hr",{}),Object(v.jsx)("span",{className:"error",children:l}),0===n.length&&Object(v.jsx)("div",{className:"settingsSpacingTop"}),Object(v.jsx)("button",{onClick:function(e){j(""),fetch(m+"api/retrievelogs",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){if(403!==e.status)return e.json();j("Your account does not have the privileges required to access logs.")})).then((function(e){if(!e.events)throw j("".concat(e.errormsg," Please try again.")),new Error("".concat(e.errormsg," (fetch logs button on Settings page)"));e.events.sort((function(e,t){var n=new Date(e.generated_at).getTime();return new Date(t.generated_at).getTime()-n})),s(e.events)})).catch((function(e){e.cause="app. logs fetch request",p(e)}))},children:"Load Application Logs"}),0===n.length&&Object(v.jsx)("div",{className:"settingsSpacingBottom"}),n.length>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)("span",{children:["Showing last ",n.length," logged events, from most recent to oldest"]}),Object(v.jsx)("hr",{}),Object(v.jsx)("div",{className:"tableOuterWrapper",children:Object(v.jsx)("div",{className:"tableInnerWrapper",children:Object(v.jsxs)("table",{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Row no."}),Object(v.jsx)("th",{children:"ID no."}),Object(v.jsx)("th",{children:"time created, EST"}),Object(v.jsx)("th",{children:"program"}),Object(v.jsx)("th",{children:"message"})]})}),Object(v.jsx)("tbody",{children:n.map((function(e,t){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:e.id}),Object(v.jsx)("td",{children:e.generated_at}),Object(v.jsx)("td",{children:e.program}),Object(v.jsx)("td",{children:e.message})]},e.id)}))})]})})})]})]})}),X=function(){var e=Object(o.useContext)(S),t=Object(o.useContext)(q),n=function(){t.userTouch||t.setUserTouch()};return Object(o.useEffect)((function(){return window.addEventListener("touchstart",n),function(){window.removeEventListener("touchstart",n)}}),[]),Object(v.jsx)(L,{children:Object(v.jsxs)(d.d,{children:[Object(v.jsx)(d.b,{exact:!0,path:"/",children:e.isLoggedIn?Object(v.jsx)(d.a,{to:"/assessment"}):Object(v.jsx)(d.a,{to:"/login"})}),Object(v.jsx)(d.b,{exact:!0,path:"/login",children:e.isLoggedIn?Object(v.jsx)(d.a,{to:"/assessment"}):Object(v.jsx)(w,{})}),Object(v.jsx)(d.b,{exact:!0,path:"/assessment",children:e.isLoggedIn?Object(v.jsx)(M,{}):Object(v.jsx)(d.a,{to:"/"})}),Object(v.jsx)(d.b,{exact:!0,path:"/data",children:e.isLoggedIn?Object(v.jsx)($,{}):Object(v.jsx)(d.a,{to:"/"})}),Object(v.jsx)(d.b,{exact:!0,path:"/settings",children:e.isLoggedIn?Object(v.jsx)(K,{}):Object(v.jsx)(d.a,{to:"/"})}),Object(v.jsx)(d.b,{path:"*",children:Object(v.jsx)(d.a,{to:"/"})})]})})},Z=n(26),ee=n(27),te=n(29),ne=n(28),se=(n(48),function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(e){var s;return Object(Z.a)(this,n),(s=t.call(this,e)).state={error:null,errorInfo:null},s}return Object(ee.a)(n,[{key:"componentDidCatch",value:function(e,t){e.cause="React render error",console.log("errB error:"),console.log(Object.keys(e),Object.values(e)),p(e),this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"errorwrapper",children:[Object(v.jsx)("h1",{className:"errorheader",children:"Error"}),Object(v.jsx)("hr",{}),Object(v.jsx)("h1",{className:"face",children:"\u2639"}),Object(v.jsx)("h2",{children:"Sorry, an unexpected error has occurred."}),Object(v.jsx)("hr",{}),Object(v.jsx)("p",{children:"Please follow the below link to return to the home screen:"}),Object(v.jsx)("a",{href:m,className:"link",children:"Return to Home Screen"})]})}):this.props.children}}]),n}(i.a.Component));window.onerror=function(e,t,n,s,c){c.cause="uncaught; line:col ".concat(n,":").concat(s," of ").concat(t),console.log(c.message),p(c)},j.a.render(Object(v.jsx)(se,{children:Object(v.jsx)(C.a,{children:Object(v.jsx)(N,{children:Object(v.jsx)(I,{children:Object(v.jsx)(X,{})})})})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.7270a5d6.chunk.js.map